<!DOCTYPE html>
<html>
<body>
<h2>Available Doctors</h2>
<div id="list"></div>

<script>
fetch("/doctors", {
  method: "POST",
  headers: {"Content-Type": "application/json"},
  body: JSON.stringify({ location: localStorage.getItem("location") })
})
.then(res => res.json())
.then(data => {
  data.forEach(d => {
    document.getElementById("list").innerHTML += `
      <p>
        <b>${d.name}</b><br>
        Fee: â‚¹${d.fee} | Rating: ${d.rating}
        <button onclick="book(${d.id}, ${d.fee})">Book</button>
      </p>`;
  });
});

function book(id, fee) {
  localStorage.setItem("doctorId", id);
  localStorage.setItem("fee", fee);
  window.location.href = "book.html";
}
</script>
</body>
</html>
